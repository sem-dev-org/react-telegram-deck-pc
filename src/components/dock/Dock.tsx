import { motion } from 'framer-motion';
import { useLocation, useNavigate } from 'react-router-dom';
import { useMenuStore } from '../../store/menu';
import { hapticFeedback } from '@telegram-apps/sdk-react';

import React from 'react';
import { paths } from '@/routes/paths';

type DockItem = {
  path?: string;
  icon: React.ReactNode;
  label: string;
  activeIcon: React.ReactNode;
};

// 创建一个菜单图标组件
const MenuIcon = ({ isActive, isOpen }: { isActive: boolean; isOpen: boolean }) => {
  const color = isActive ? 'bg-primary' : 'bg-neutral';

  return (
    <div className="relative flex h-6 w-6 items-center justify-center">
      <motion.span
        className={`absolute ${color} h-[2px] w-5 rounded-full`}
        initial={false}
        animate={{
          rotate: isOpen ? 45 : 0,
          y: isOpen ? 0 : -6,
        }}
        transition={{ duration: 0.3 }}
      />
      <motion.span
        className={`absolute ${color} h-[2px] w-5 rounded-full`}
        initial={false}
        animate={{
          opacity: isOpen ? 0 : 1,
        }}
        transition={{ duration: 0.3 }}
      />
      <motion.span
        className={`absolute ${color} h-[2px] w-5 rounded-full`}
        initial={false}
        animate={{
          rotate: isOpen ? -45 : 0,
          y: isOpen ? 0 : 6,
        }}
        transition={{ duration: 0.3 }}
      />
    </div>
  );
};

const dockItems: DockItem[] = [
  {
    icon: <MenuIcon isActive={false} isOpen={false} />,
    activeIcon: <MenuIcon isActive={true} isOpen={false} />,
    label: 'Menu',
  },

  {
    path: paths.main.explore.root,
    icon: (
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" className="fill-neutral" viewBox="0 0 256 256">
        <path d="M229.66,218.34l-50.07-50.06a88.11,88.11,0,1,0-11.31,11.31l50.06,50.07a8,8,0,0,0,11.32-11.32ZM40,112a72,72,0,1,1,72,72A72.08,72.08,0,0,1,40,112Z"></path>
      </svg>
    ),
    activeIcon: (
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" className="fill-primary" viewBox="0 0 256 256">
        <path d="M168,112a56,56,0,1,1-56-56A56,56,0,0,1,168,112Zm61.66,117.66a8,8,0,0,1-11.32,0l-50.06-50.07a88,88,0,1,1,11.32-11.31l50.06,50.06A8,8,0,0,1,229.66,229.66ZM112,184a72,72,0,1,0-72-72A72.08,72.08,0,0,0,112,184Z"></path>
      </svg>
    ),
    label: 'Explore',
  },
  {
    path: paths.main.casino.root,
    icon: (
      <svg className="fill-neutral" width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
        <g clipPath="url(#clip0_2106_23386)">
          <path d="M4.03846 1.5C2.63702 1.5 1.5 2.63702 1.5 4.03846V17.5769C1.5 18.9784 2.63702 20.1154 4.03846 20.1154H13.3462C14.7476 20.1154 15.8846 18.9784 15.8846 17.5769V4.03846C15.8846 2.63702 14.7476 1.5 13.3462 1.5H4.03846ZM4.03846 3.19231H13.3462C13.8122 3.19231 14.1923 3.57242 14.1923 4.03846V17.5769C14.1923 18.043 13.8122 18.4231 13.3462 18.4231H4.03846C3.57242 18.4231 3.19231 18.043 3.19231 17.5769V4.03846C3.19231 3.57242 3.57242 3.19231 4.03846 3.19231ZM11.8125 4.03846C11.7596 4.03846 11.7233 4.04507 11.7067 4.0649C11.6902 4.08143 11.6935 4.10787 11.6803 4.14423L10.9399 6.47115C10.9267 6.51412 10.93 6.53726 10.9399 6.55048C10.9498 6.5637 10.9663 6.57692 10.9928 6.57692H11.4159C11.4522 6.57692 11.4754 6.5637 11.4952 6.55048C11.515 6.53395 11.5349 6.51412 11.5481 6.47115L11.6803 5.99519H12.4471L12.5793 6.47115C12.5925 6.51082 12.5892 6.53395 12.6058 6.55048C12.619 6.57031 12.6686 6.57692 12.7115 6.57692H13.1875C13.2139 6.57692 13.2073 6.5637 13.2139 6.55048C13.2206 6.53726 13.2239 6.52734 13.2139 6.4976L12.4471 4.14423C12.4339 4.10787 12.4372 4.08474 12.4207 4.0649C12.4041 4.04507 12.3678 4.03846 12.3149 4.03846H11.8125ZM16.7308 4.22356V5.99519L20.274 6.92067C20.7269 7.03966 21.0012 7.5024 20.8822 7.95192L17.4183 21.0409C17.2993 21.4904 16.8398 21.768 16.387 21.649L13.6635 20.9351C13.561 20.945 13.4552 20.9615 13.3462 20.9615H7.34375C7.47927 21.0243 7.61478 21.0805 7.76683 21.1202L15.9639 23.2885C17.3191 23.6487 18.6974 22.8456 19.0577 21.4904L22.5216 8.40144C22.8786 7.04627 22.0787 5.64153 20.7236 5.28125L16.7308 4.22356ZM12.0505 4.64663H12.0769L12.2091 5.1226L12.3149 5.54567H11.8125L11.9183 5.1226L12.0505 4.64663ZM8.66587 6.62981C8.66587 6.62981 4.96064 9.21785 4.96394 11.1779C4.96725 12.348 5.77704 13.0817 6.89423 13.0817C7.42969 13.0817 8.06761 12.6785 8.40144 12.3678C8.40144 12.3678 8.08083 13.6998 7.52885 14.8798C7.46274 15.0219 9.95493 15.0219 9.88221 14.8798C9.3137 13.7891 9.00962 12.3678 9.00962 12.3678C9.34345 12.6917 9.91196 13.0817 10.4904 13.0817C11.6109 13.0784 12.3942 12.3248 12.3942 11.1514C12.3909 9.19141 8.69231 6.62981 8.69231 6.62981H8.66587ZM18.5024 7.37019C18.4793 7.38341 18.4429 7.39333 18.4231 7.42308L17.101 9.48558C17.0745 9.52524 17.0679 9.54838 17.0745 9.5649C17.0811 9.57813 17.101 9.58474 17.1274 9.59135L17.5505 9.72356C17.5868 9.73347 17.6067 9.73347 17.6298 9.72356C17.6529 9.71364 17.686 9.68059 17.7091 9.64423L17.9471 9.22115L18.6875 9.43269V9.90865C18.6875 9.95162 18.704 9.96815 18.7139 9.98798C18.7239 10.0111 18.7503 10.0276 18.7933 10.0409L19.2428 10.1731C19.2692 10.1797 19.2858 10.1863 19.2957 10.1731C19.3056 10.1599 19.3221 10.1268 19.3221 10.0938L19.1899 7.63462C19.1866 7.59495 19.1734 7.57843 19.1635 7.55529C19.1502 7.53215 19.1073 7.51563 19.0577 7.5024L18.6082 7.37019C18.5586 7.35697 18.5222 7.35697 18.5024 7.37019ZM18.6611 8.03125H18.6875V8.95673L18.2115 8.82452L18.4231 8.42788L18.6611 8.03125ZM4.22356 15.0385C4.19712 15.0385 4.18059 15.0517 4.17067 15.0649C4.16076 15.0781 4.15745 15.1013 4.17067 15.1442L4.91106 17.4712C4.92428 17.5075 4.94742 17.5306 4.96394 17.5505C4.98047 17.567 4.99369 17.5769 5.04327 17.5769H5.54567C5.59856 17.5769 5.63492 17.5703 5.65144 17.5505C5.66797 17.5306 5.66466 17.5075 5.67788 17.4712L6.44471 15.1178C6.45463 15.088 6.45132 15.0781 6.44471 15.0649C6.4381 15.0517 6.44471 15.0385 6.41827 15.0385H5.94231C5.89934 15.0385 5.84976 15.0451 5.83654 15.0649C5.82001 15.0847 5.82332 15.1046 5.8101 15.1442L5.67788 15.6202H4.91106L4.77885 15.1442C4.76563 15.1013 4.74579 15.0814 4.72596 15.0649C4.70613 15.0517 4.68299 15.0385 4.64663 15.0385H4.22356ZM5.04327 16.0697H5.54567L5.4399 16.4928L5.30769 16.9688H5.28125L5.14904 16.4928L5.04327 16.0697Z" />
        </g>
        <defs>
          <clipPath id="clip0_2106_23386">
            <rect width="22" height="22" fill="white" transform="translate(1.5 1.5)" />
          </clipPath>
        </defs>
      </svg>
    ),
    activeIcon: (
      <svg className="fill-primary" width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
        <g clipPath="url(#clip0_2106_23386)">
          <path d="M4.03846 1.5C2.63702 1.5 1.5 2.63702 1.5 4.03846V17.5769C1.5 18.9784 2.63702 20.1154 4.03846 20.1154H13.3462C14.7476 20.1154 15.8846 18.9784 15.8846 17.5769V4.03846C15.8846 2.63702 14.7476 1.5 13.3462 1.5H4.03846ZM4.03846 3.19231H13.3462C13.8122 3.19231 14.1923 3.57242 14.1923 4.03846V17.5769C14.1923 18.043 13.8122 18.4231 13.3462 18.4231H4.03846C3.57242 18.4231 3.19231 18.043 3.19231 17.5769V4.03846C3.19231 3.57242 3.57242 3.19231 4.03846 3.19231ZM11.8125 4.03846C11.7596 4.03846 11.7233 4.04507 11.7067 4.0649C11.6902 4.08143 11.6935 4.10787 11.6803 4.14423L10.9399 6.47115C10.9267 6.51412 10.93 6.53726 10.9399 6.55048C10.9498 6.5637 10.9663 6.57692 10.9928 6.57692H11.4159C11.4522 6.57692 11.4754 6.5637 11.4952 6.55048C11.515 6.53395 11.5349 6.51412 11.5481 6.47115L11.6803 5.99519H12.4471L12.5793 6.47115C12.5925 6.51082 12.5892 6.53395 12.6058 6.55048C12.619 6.57031 12.6686 6.57692 12.7115 6.57692H13.1875C13.2139 6.57692 13.2073 6.5637 13.2139 6.55048C13.2206 6.53726 13.2239 6.52734 13.2139 6.4976L12.4471 4.14423C12.4339 4.10787 12.4372 4.08474 12.4207 4.0649C12.4041 4.04507 12.3678 4.03846 12.3149 4.03846H11.8125ZM16.7308 4.22356V5.99519L20.274 6.92067C20.7269 7.03966 21.0012 7.5024 20.8822 7.95192L17.4183 21.0409C17.2993 21.4904 16.8398 21.768 16.387 21.649L13.6635 20.9351C13.561 20.945 13.4552 20.9615 13.3462 20.9615H7.34375C7.47927 21.0243 7.61478 21.0805 7.76683 21.1202L15.9639 23.2885C17.3191 23.6487 18.6974 22.8456 19.0577 21.4904L22.5216 8.40144C22.8786 7.04627 22.0787 5.64153 20.7236 5.28125L16.7308 4.22356ZM12.0505 4.64663H12.0769L12.2091 5.1226L12.3149 5.54567H11.8125L11.9183 5.1226L12.0505 4.64663ZM8.66587 6.62981C8.66587 6.62981 4.96064 9.21785 4.96394 11.1779C4.96725 12.348 5.77704 13.0817 6.89423 13.0817C7.42969 13.0817 8.06761 12.6785 8.40144 12.3678C8.40144 12.3678 8.08083 13.6998 7.52885 14.8798C7.46274 15.0219 9.95493 15.0219 9.88221 14.8798C9.3137 13.7891 9.00962 12.3678 9.00962 12.3678C9.34345 12.6917 9.91196 13.0817 10.4904 13.0817C11.6109 13.0784 12.3942 12.3248 12.3942 11.1514C12.3909 9.19141 8.69231 6.62981 8.69231 6.62981H8.66587ZM18.5024 7.37019C18.4793 7.38341 18.4429 7.39333 18.4231 7.42308L17.101 9.48558C17.0745 9.52524 17.0679 9.54838 17.0745 9.5649C17.0811 9.57813 17.101 9.58474 17.1274 9.59135L17.5505 9.72356C17.5868 9.73347 17.6067 9.73347 17.6298 9.72356C17.6529 9.71364 17.686 9.68059 17.7091 9.64423L17.9471 9.22115L18.6875 9.43269V9.90865C18.6875 9.95162 18.704 9.96815 18.7139 9.98798C18.7239 10.0111 18.7503 10.0276 18.7933 10.0409L19.2428 10.1731C19.2692 10.1797 19.2858 10.1863 19.2957 10.1731C19.3056 10.1599 19.3221 10.1268 19.3221 10.0938L19.1899 7.63462C19.1866 7.59495 19.1734 7.57843 19.1635 7.55529C19.1502 7.53215 19.1073 7.51563 19.0577 7.5024L18.6082 7.37019C18.5586 7.35697 18.5222 7.35697 18.5024 7.37019ZM18.6611 8.03125H18.6875V8.95673L18.2115 8.82452L18.4231 8.42788L18.6611 8.03125ZM4.22356 15.0385C4.19712 15.0385 4.18059 15.0517 4.17067 15.0649C4.16076 15.0781 4.15745 15.1013 4.17067 15.1442L4.91106 17.4712C4.92428 17.5075 4.94742 17.5306 4.96394 17.5505C4.98047 17.567 4.99369 17.5769 5.04327 17.5769H5.54567C5.59856 17.5769 5.63492 17.5703 5.65144 17.5505C5.66797 17.5306 5.66466 17.5075 5.67788 17.4712L6.44471 15.1178C6.45463 15.088 6.45132 15.0781 6.44471 15.0649C6.4381 15.0517 6.44471 15.0385 6.41827 15.0385H5.94231C5.89934 15.0385 5.84976 15.0451 5.83654 15.0649C5.82001 15.0847 5.82332 15.1046 5.8101 15.1442L5.67788 15.6202H4.91106L4.77885 15.1442C4.76563 15.1013 4.74579 15.0814 4.72596 15.0649C4.70613 15.0517 4.68299 15.0385 4.64663 15.0385H4.22356ZM5.04327 16.0697H5.54567L5.4399 16.4928L5.30769 16.9688H5.28125L5.14904 16.4928L5.04327 16.0697Z" />
        </g>
        <defs>
          <clipPath id="clip0_2106_23386">
            <rect width="22" height="22" fill="white" transform="translate(1.5 1.5)" />
          </clipPath>
        </defs>
      </svg>
    ),
    label: 'Casino',
  },
  {
    path: paths.main.bonus.root,
    icon: (
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" className="stroke-neutral">
        <g fill="none" strokeWidth="1.5">
          <path strokeLinecap="round" d="M22 12H2M12 2v20" opacity="0.5" />
          <path strokeLinecap="round" d="M13 12a4 4 0 0 0 4 4m-6-4a4 4 0 0 1-4 4" />
          <path d="M12 10.035a3.25 3.25 0 0 1 2.46-3.15c1.603-.4 3.056 1.052 2.655 2.656a3.25 3.25 0 0 1-3.15 2.46H12zm0 0a3.25 3.25 0 0 0-2.46-3.15c-1.603-.4-3.056 1.052-2.655 2.656a3.25 3.25 0 0 0 3.15 2.46H12z" />
          <path d="M2 12c0-4.714 0-7.071 1.464-8.536C4.93 2 7.286 2 12 2s7.071 0 8.535 1.464C22 4.93 22 7.286 22 12s0 7.071-1.465 8.535C19.072 22 16.714 22 12 22s-7.071 0-8.536-1.465C2 19.072 2 16.714 2 12Z" />
        </g>
      </svg>
    ),
    activeIcon: (
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" className="fill-primary">
        <path d="M11.25 2c-4.219.004-6.401.08-7.786 1.464C2.08 4.85 2.004 7.031 2 11.25h4.914a4 4 0 0 1-.757-1.528C5.62 7.57 7.57 5.62 9.722 6.157c.572.143 1.09.406 1.528.757zM2 12.75c.004 4.218.08 6.4 1.464 7.785C4.85 21.92 7.031 21.995 11.25 22v-7.877A4.75 4.75 0 0 1 7 16.75a.75.75 0 0 1 0-1.5a3.25 3.25 0 0 0 3.163-2.5zM12.75 22c4.218-.005 6.4-.08 7.785-1.465c1.385-1.384 1.46-3.567 1.465-7.785h-8.163A3.25 3.25 0 0 0 17 15.25a.75.75 0 0 1 0 1.5a4.75 4.75 0 0 1-4.25-2.627zM22 11.25c-.005-4.219-.08-6.401-1.465-7.786C19.151 2.08 16.968 2.004 12.75 2v4.914a4 4 0 0 1 1.527-.757c2.153-.538 4.104 1.412 3.565 3.565a4 4 0 0 1-.756 1.528z" />
        <path d="M9.358 7.613a2.5 2.5 0 0 1 1.892 2.422v1.215h-1.215a2.5 2.5 0 0 1-2.422-1.892a1.44 1.44 0 0 1 1.745-1.745m3.392 2.422v1.215h1.215c1.145 0 2.144-.78 2.422-1.892a1.44 1.44 0 0 0-1.746-1.745a2.5 2.5 0 0 0-1.891 2.422" />
      </svg>
    ),
    label: 'Bonus',
  },
  {
    path: paths.main.profile.root,
    icon: (
      <svg width="24" height="24" viewBox="0 0 24 25" xmlns="http://www.w3.org/2000/svg" className="fill-neutral">
        <path
          opacity="0.5"
          d="M21.8382 11.6263L21.609 14.0616C21.2313 18.0742 21.0425 20.0805 19.8599 21.2902C18.6773 22.5 16.9048 22.5 13.3599 22.5H10.6401C7.09517 22.5 5.32271 22.5 4.14009 21.2902C2.95748 20.0805 2.76865 18.0742 2.391 14.0616L2.16181 11.6263C1.9818 9.7137 1.8918 8.75739 2.21899 8.36207C2.39598 8.14823 2.63666 8.0172 2.89399 7.9946C3.36968 7.95282 3.96708 8.6329 5.16187 9.99307C5.77977 10.6965 6.08872 11.0482 6.43337 11.1027C6.62434 11.1328 6.81892 11.1018 6.99526 11.0131C7.31351 10.8529 7.5257 10.4181 7.95007 9.54852L10.1869 4.96486C10.9888 3.32162 11.3898 2.5 12 2.5C12.6102 2.5 13.0112 3.32162 13.8131 4.96485L16.0499 9.54851C16.4743 10.4181 16.6865 10.8529 17.0047 11.0131C17.1811 11.1018 17.3757 11.1328 17.5666 11.1027C17.9113 11.0482 18.2202 10.6965 18.8381 9.99307C20.0329 8.6329 20.6303 7.95282 21.106 7.9946C21.3633 8.0172 21.604 8.14823 21.781 8.36207C22.1082 8.75739 22.0182 9.7137 21.8382 11.6263Z"
        />
        <path d="M12.9524 13.1989L12.8541 13.0225C12.4741 12.3408 12.2841 12 12 12C11.7159 12 11.5259 12.3408 11.1459 13.0225L11.0476 13.1989C10.9397 13.3926 10.8857 13.4894 10.8015 13.5533C10.7173 13.6172 10.6125 13.641 10.4028 13.6884L10.2119 13.7316C9.47396 13.8986 9.10501 13.982 9.01723 14.2643C8.92945 14.5466 9.18097 14.8407 9.68403 15.429L9.81418 15.5812C9.95713 15.7483 10.0286 15.8319 10.0608 15.9353C10.0929 16.0387 10.0821 16.1502 10.0605 16.3733L10.0408 16.5763C9.96476 17.3612 9.92674 17.7536 10.1565 17.9281C10.3864 18.1025 10.7318 17.9435 11.4227 17.6254L11.6014 17.5431C11.7977 17.4528 11.8959 17.4075 12 17.4075C12.1041 17.4075 12.2022 17.4527 12.3986 17.5431L12.5773 17.6254C13.2682 17.9435 13.6136 18.1025 13.8435 17.9281C14.0733 17.7536 14.0352 17.3612 13.9592 16.5763L13.9395 16.3733C13.9179 16.1502 13.9071 16.0387 13.9392 15.9353C13.9714 15.8319 14.0429 15.7483 14.1858 15.5812L14.316 15.429C14.819 14.8407 15.0706 14.5466 14.9828 14.2643C14.895 13.982 14.526 13.8986 13.7881 13.7316L13.5972 13.6884C13.3875 13.641 13.2827 13.6172 13.1985 13.5533C13.1143 13.4894 13.0603 13.3926 12.9524 13.1989Z" />
      </svg>
    ),
    activeIcon: (
      <svg width="24" height="24" viewBox="0 0 24 25" xmlns="http://www.w3.org/2000/svg" className="fill-primary">
        <path
          opacity="0.5"
          d="M21.8382 11.6263L21.609 14.0616C21.2313 18.0742 21.0425 20.0805 19.8599 21.2902C18.6773 22.5 16.9048 22.5 13.3599 22.5H10.6401C7.09517 22.5 5.32271 22.5 4.14009 21.2902C2.95748 20.0805 2.76865 18.0742 2.391 14.0616L2.16181 11.6263C1.9818 9.7137 1.8918 8.75739 2.21899 8.36207C2.39598 8.14823 2.63666 8.0172 2.89399 7.9946C3.36968 7.95282 3.96708 8.6329 5.16187 9.99307C5.77977 10.6965 6.08872 11.0482 6.43337 11.1027C6.62434 11.1328 6.81892 11.1018 6.99526 11.0131C7.31351 10.8529 7.5257 10.4181 7.95007 9.54852L10.1869 4.96486C10.9888 3.32162 11.3898 2.5 12 2.5C12.6102 2.5 13.0112 3.32162 13.8131 4.96485L16.0499 9.54851C16.4743 10.4181 16.6865 10.8529 17.0047 11.0131C17.1811 11.1018 17.3757 11.1328 17.5666 11.1027C17.9113 11.0482 18.2202 10.6965 18.8381 9.99307C20.0329 8.6329 20.6303 7.95282 21.106 7.9946C21.3633 8.0172 21.604 8.14823 21.781 8.36207C22.1082 8.75739 22.0182 9.7137 21.8382 11.6263Z"
        />
        <path d="M12.9524 13.1989L12.8541 13.0225C12.4741 12.3408 12.2841 12 12 12C11.7159 12 11.5259 12.3408 11.1459 13.0225L11.0476 13.1989C10.9397 13.3926 10.8857 13.4894 10.8015 13.5533C10.7173 13.6172 10.6125 13.641 10.4028 13.6884L10.2119 13.7316C9.47396 13.8986 9.10501 13.982 9.01723 14.2643C8.92945 14.5466 9.18097 14.8407 9.68403 15.429L9.81418 15.5812C9.95713 15.7483 10.0286 15.8319 10.0608 15.9353C10.0929 16.0387 10.0821 16.1502 10.0605 16.3733L10.0408 16.5763C9.96476 17.3612 9.92674 17.7536 10.1565 17.9281C10.3864 18.1025 10.7318 17.9435 11.4227 17.6254L11.6014 17.5431C11.7977 17.4528 11.8959 17.4075 12 17.4075C12.1041 17.4075 12.2022 17.4527 12.3986 17.5431L12.5773 17.6254C13.2682 17.9435 13.6136 18.1025 13.8435 17.9281C14.0733 17.7536 14.0352 17.3612 13.9592 16.5763L13.9395 16.3733C13.9179 16.1502 13.9071 16.0387 13.9392 15.9353C13.9714 15.8319 14.0429 15.7483 14.1858 15.5812L14.316 15.429C14.819 14.8407 15.0706 14.5466 14.9828 14.2643C14.895 13.982 14.526 13.8986 13.7881 13.7316L13.5972 13.6884C13.3875 13.641 13.2827 13.6172 13.1985 13.5533C13.1143 13.4894 13.0603 13.3926 12.9524 13.1989Z" />
      </svg>
    ),
    label: 'Profile',
  },
];

export const Dock = () => {
  const location = useLocation();
  const navigate = useNavigate();
  const { isMenuOpen, setIsMenuOpen } = useMenuStore();

  // 当菜单打开时，activeIndex 应该是 0（menu 按钮的索引）
  const activeIndex = isMenuOpen ? 0 : dockItems.findIndex((item) => location.pathname === item.path);

  const handleClick = (item: DockItem) => {
    if (hapticFeedback.isSupported()) {
      hapticFeedback.impactOccurred('medium');
    }

    if (item.path) {
      if (item.path === paths.main.casino.root) {
        setIsMenuOpen(false);
      }
      navigate(item.path);
    } else if (item.label === 'Menu') {
      setIsMenuOpen(!isMenuOpen);
    }
  };

  // 渲染菜单图标，考虑菜单打开状态
  const renderMenuIcon = (index: number) => {
    if (index === 0) {
      // Menu按钮索引为0，当菜单打开时使用 primary 颜色
      return <MenuIcon isActive={activeIndex === 0 || isMenuOpen} isOpen={isMenuOpen} />;
    }
    return activeIndex === index ? dockItems[index].activeIcon : dockItems[index].icon;
  };

  return (
    <div className="dock border-t-base-300 bg-base-200 z-10000 h-[82px] border-t px-0">
      <motion.div
        className="absolute top-0 left-0 w-[46px]"
        animate={{
          x: `calc((100vw / ${dockItems.length}) * ${activeIndex} + (100vw / ${dockItems.length * 2}) - 22.5px)`,
        }}
        transition={{ type: 'spring', stiffness: 300, damping: 30 }}
      >
        <svg
          width="46"
          height="16"
          viewBox="0 0 46 16"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
          className="fill-base-300 absolute top-0"
        >
          <path
            fillRule="evenodd"
            clipRule="evenodd"
            d="M0.367188 0C3.54492 0 6.07031 2.55664 7.28516 5.49414C9.83594 11.6621 15.9121 16 23 16C30.0879 16 36.1641 11.6621 38.7148 5.49414C39.9297 2.55664 42.4551 0 45.6328 0H0.367188Z"
          />
        </svg>

        <div className="bg-[#E7FB78] absolute -top-2 left-[16px] flex h-[14px] w-[14px] items-center justify-center rounded-full" />
      </motion.div>
      {dockItems.map((item, index) => (
        <button key={index} onClick={() => handleClick(item)}>
          {renderMenuIcon(index)}
          <span className="dock-label text-neutral">{item.label}</span>
        </button>
      ))}
    </div>
  );
};
